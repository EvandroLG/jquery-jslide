(function(a){a.fn.jSlide=function(c){var d={elemByPages:1,pagination:true,effect:true,vertical:false,autoScroll:0,ajax:null};c=a.extend(d,c);var b={actual:null,countElem:null,btnNext:null,btnPrev:null,elemWeight:null,fncAutoScroll:null,page:1,init:function(f){var e=c.ajax===null?false:true;this.actual=f;this.countElem=Math.ceil(this.actual.find(".slide li").size()/c.elemByPages);this.btnNext=this.actual.find(".btnNext");this.btnPrev=this.actual.find(".btnPrev");this.elemWeight=c.vertical?this.actual.find(".slide li").height():this.actual.find(".slide li").width();this.begin(e,false);this.ajax()},begin:function(j,h){if((!j)||(j&&h)){var k,g=this.actual.find(".slide li").size();if(!c.vertical){var e=parseInt(this.actual.find(".slide li").width())*this.actual.find(".slide li").size();this.actual.find(".slide ul").css("width",e)}if(g>c.elemByPages){this.btnNext.removeClass("off")}this.btnNext.attr("href","#2");this.btnPrev.attr("href","#1");if(c.pagination){k='<ul class="pagination">';k+='<li><a class="atv" href="#1">1</a></li>';if(g>c.elemByPages){for(var f=2;f<=this.countElem;f++){k+='<li><a href="#'+f+'">'+f+"</a></li>"}}k+="</ul>";this.actual.append(k)}this.pagination();this.autoScroll()}},pagination:function(){var j=this.actual,g=j.find(".pagination a"),k=j.find(".pagination a.atv"),m=c.vertical?j.find(".slide li").height():j.find(".slide li").width(),h=this.countElem,e=0,f=this.btnNext,l=this.btnPrev,i=c.pagination?j.find(".btnPrev, .btnNext, .pagination a"):j.find(".btnPrev, .btnNext");i.click(function(o){var n=a(this).attr("class")===""||a(this).attr("class")==="atv"?null:a(this).attr("class");j.find(".pagination a.atv").removeClass("atv");b.page=parseInt(a(this).attr("href").replace("#",""));k=j.find(".pagination a:eq("+(b.page-1)+")");k.addClass("atv");f.attr("href","#"+(b.page+1));l.attr("href","#"+(b.page-1));if(b.page===h){f.addClass("off")}else{if(b.page===1){l.addClass("off")}}if(b.page>1&&l.hasClass("off")){l.removeClass("off")}else{if(b.page<h&&f.hasClass("off")){f.removeClass("off")}}if(c.autoScroll){clearInterval(b.fncAutoScroll)}e=(((b.page-1)*c.elemByPages)*m)*-1;b.slide(j,e);o.preventDefault()})},slide:function(g,e){var f=g.find(".slide ul");if(c.effect){c.vertical?f.animate({marginTop:e}):f.animate({marginLeft:e})}else{c.vertical?f.css("margin-top",e):f.css("margin-left",e)}},autoScroll:function(){if(!isNaN(c.autoScroll)&&c.autoScroll>0){var i=this.actual,e=this.btnNext,f=this.btnPrev,g=this.countElem,h=this.elemWeight;elemPosition=null;c.autoScroll=c.autoScroll*1000;this.fncAutoScroll=setInterval(function(){b.page<(g)?++b.page:b.page=1;elemPosition=(((b.page-1)*c.elemByPages)*h)*-1;e.attr("href","#"+(b.page+1));f.attr("href","#"+(b.page-1));if(c.pagination){i.find(".pagination a.atv").removeClass("atv");i.find(".pagination a:eq("+(b.page-1)+")").addClass("atv")}if(b.page===1){f.addClass("off")}else{if(f.hasClass("off")){f.removeClass("off")}}if(b.page===g){e.addClass("off")}else{if(e.hasClass("off")){e.removeClass("off")}}b.slide(i,elemPosition)},c.autoScroll)}},ajax:function(){if(c.ajax!==null){if((c.ajax.indexOf(".js")!==-1||c.ajax.indexOf(".json")!==-1)){a.getJSON(c.ajax,function(h){var e,j=h.elements.length;var f="<ul>";var g="<li>{elem}</li>";for(e=0;e<j;e++){f+=g.replace("{elem}",'<img src="'+h.elements[e].image+'" alt="" />')}f+="</ul>";b.actual.find(".slide").html(f);b.countElem=Math.ceil(b.actual.find(".slide li").size()/c.elemByPages);b.elemWeight=c.vertical?b.actual.find(".slide li").height():b.actual.find(".slide li").width();b.begin(true,true)})}}}};return this.each(function(){b.init(a(this))})}})(jQuery);